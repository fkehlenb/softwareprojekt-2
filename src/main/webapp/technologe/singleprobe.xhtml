<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
      xmlns:of="http://omnifaces.org/functions">
<ui:define name="metadata">
    <f:metadata>
        <f:viewAction action="#{languageBean.setLanguage}" />
    </f:metadata>
</ui:define>

<h:head>
    <title>SFB - Farbige Zustände</title>
    <link rel="icon" href="../background.png"/>
</h:head>

<body>
<ui:composition template="../template/common/layout.xhtml">


<ui:define name="content">
<div class="ui-g-2"></div>
<div class="ui-g-8">
    <h:body style="background: url('../background.png')">
    <h:form id="form" style="background-color: white; margin-top: 100px; width: 650px">
        <p:growl>
            <p:autoUpdate/>
        </p:growl>
    <p:panelGrid columns="1">

        <p:row>
            <h1 style="color: cornflowerblue">Probe #{singleSampleBean.p.probenID} - Überblick</h1>
        </p:row>

        <p:row>
            <p>Hier haben Sie eine detaillierte Übersicht über die Probe #{singleSampleBean.p.probenID}</p>
        </p:row>

        <p:row>
            <p>Zustand: #{singleSampleBean.p.zustand}</p>
        </p:row>

        <p:row>
            <p>Standort: #{singleSampleBean.p.standort.ort}</p>
        </p:row>

        <p:row>
            <p>Träger: #{singleSampleBean.p.currentTraeger.id}</p>
        </p:row>

        <p:row>
            <p>Eigenschaften: </p>
        </p:row>

        <p:dataTable var="eig" value="#{singleSampleBean.p.qualitativeEigenschaften}">
            <p:column headerText="Id">
                <h:outputText value="#{eig.id}"/>
            </p:column>
            <p:column headerText="Name">
                <h:outputText value="#{eig.name}"/>
            </p:column>
        </p:dataTable>

        <p:row>
            <p>Bedingungen: </p>
        </p:row>

        <p:dataTable var="bed" value="#{singleSampleBean.p.bedingungen}">
            <p:column headerText="Id">
                <h:outputText value="#{bed.id}"/>
            </p:column>
            <p:column headerText="Name">
                <h:outputText value="#{bed.name}"/>
            </p:column>
        </p:dataTable>

        <p:row>
            <p>Kommentare: </p>
        </p:row>

        <p:growl id="msgs" showDetail="true"/>

        <p:dataTable id="comments" var="kommentar" value="#{singleSampleBean.p.kommentar}" editable="true" editMode="cell" widgetVar="cellComments">

            <p:ajax event="cellEdit" listener="#{singleSampleBean.KommentarEdit}" update=":form:msgs" />

            <p:column headerText="Id">
                <h:outputText value="#{kommentar.id}"/>
            </p:column>
            <p:column headerText="Datum">
                <h:outputText value="#{kommentar.dateTime}"/>
            </p:column>
            <p:column headerText="Text">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{kommentar.text}" /></f:facet>
                    <f:facet name="input"><p:inputText id="kommentarInput" value="#{kommentar.text}" style="width:96%"/></f:facet>
                </p:cellEditor>
            </p:column>
            <p:column headerText="Löschen">
                <h:form>
                    <div align="center">
                        <h:commandButton action="#{singleSampleBean.deleteProbenComment(kommentar)}" value="Löschen"/>
                    </div>
                </h:form>
            </p:column>

        </p:dataTable>

        <p:outputLabel for="kommentar" value="Kommentar:"/>
        <p:inputMask id="kommentar" value="#{singleSampleBean.singleKommentar}"/>
        <p:commandButton value="Save" type="save"/>
        <p:commandButton action="#{singleSampleBean.addProbenComment(kommentar)}"/>

    </p:panelGrid>
    </h:form>
    </h:body>

</div>
</ui:define>
</ui:composition>
</body>
</html>
